# –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ API –∏–≥—Ä–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã

## –ù–æ–≤—ã–µ API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã

### üéÆ –ò–≥—Ä–æ–∫–∏

#### –ü–æ–ª—É—á–∏—Ç—å —Ç–æ–ø –∏–≥—Ä–æ–∫–æ–≤
```http
GET /api/players/top?limit=10
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "success": true,
  "data": [
    {
      "vk_user_id": 123456789,
      "user_name": "VK User 123456789",
      "total_score": 5,
      "attempts_left": 0,
      "lives_count": 0,
      "created_at": "2024-01-01T10:00:00Z",
      "last_activity": "2024-01-01T10:30:00Z"
    }
  ],
  "count": 1
}
```

#### –ü–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –∏–≥—Ä–æ–∫–∞
```http
GET /api/players/123456789
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "success": true,
  "data": {
    "player": {
      "id": "uuid-here",
      "vk_user_id": 123456789,
      "user_name": "VK User 123456789",
      "attempts_left": 3,
      "lives_count": 45,
      "total_score": 2
    },
    "events": [
      {
        "id": "event-uuid",
        "message_text": "–ü—Ä–∏–≤–µ—Ç!",
        "score_earned": 1,
        "attempts_used": 1,
        "lives_used": 15,
        "timestamp": 1640000000
      }
    ]
  }
}
```

#### –°–±—Ä–æ—Å–∏—Ç—å –∏–≥—Ä–æ–∫–∞ (—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)
```http
POST /api/players/123456789/reset
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "success": true,
  "message": "–ò–≥—Ä–æ–∫ —Å–±—Ä–æ—à–µ–Ω –∫ –Ω–∞—á–∞–ª—å–Ω—ã–º –∑–Ω–∞—á–µ–Ω–∏—è–º",
  "data": {
    "vk_user_id": 123456789,
    "attempts_left": 5,
    "lives_count": 100,
    "total_score": 0
  }
}
```

### üìä –°–æ–±—ã—Ç–∏—è

#### –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ —Å–æ–±—ã—Ç–∏–π
```http
GET /api/events?limit=50&offset=0
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "success": true,
  "data": [
    {
      "id": "event-uuid",
      "vk_message_id": 987654321,
      "vk_user_id": 123456789,
      "user_name": "VK User 123456789",
      "message_text": "–û—Ç–ª–∏—á–Ω—ã–π –ø–æ—Å—Ç!",
      "score_earned": 1,
      "attempts_used": 1,
      "lives_used": 18,
      "timestamp": 1640000000
    }
  ],
  "count": 1
}
```

### üìà –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

#### –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏–≥—Ä—ã
```http
GET /api/game/stats
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "success": true,
  "data": {
    "players": {
      "total_players": "50",
      "total_score": "125",
      "avg_score": "2.5",
      "max_score": "8",
      "total_attempts_left": "180",
      "total_lives": "3420"
    },
    "events": {
      "total_events": "125",
      "total_score_earned": "125",
      "total_attempts_used": "125",
      "total_lives_used": "1580"
    }
  }
}
```

### üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

#### –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç –∏–≥—Ä–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã
```http
POST /api/game/test
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "success": true,
  "message": "–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–≥—Ä–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã –∑–∞–≤–µ—Ä—à–µ–Ω–æ —É—Å–ø–µ—à–Ω–æ. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞."
}
```

## –ö–∞–∫ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–∏—Å—Ç–µ–º—É

### 1. –°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –∏–≥—Ä–æ–∫–∞ —á–µ—Ä–µ–∑ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π VK
```http
POST /api/vk/test-comment
```

### 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∏–≥—Ä–æ–∫–∞
```http
GET /api/players/999999999
```

### 3. –°–±—Ä–æ—Å–∏—Ç—å –∏–≥—Ä–æ–∫–∞ –¥–ª—è –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
```http
POST /api/players/999999999/reset
```

### 4. –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø–æ–ª–Ω—ã–π —Ç–µ—Å—Ç —Å–∏—Å—Ç–µ–º—ã
```http
POST /api/game/test
```

## –ü—Ä–∏–º–µ—Ä –∏–≥—Ä–æ–≤–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞

### –®–∞–≥ 1: –ù–æ–≤—ã–π –∏–≥—Ä–æ–∫ –∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–µ—Ç
**–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π VK**: "–ü—Ä–∏–≤–µ—Ç –≤—Å–µ–º!"
**–°–ª—É—á–∞–π–Ω—ã–π —É—Ä–æ–Ω**: 12 –∂–∏–∑–Ω–µ–π

**–ê–≤—Ç–æ–æ—Ç–≤–µ—Ç –±–æ—Ç–∞**:
```
–ø—Ä–∏–≤–µ—Ç –≤—Å–µ–º —É–¥–∞—á–Ω–æ
üéÆ –ü–æ–ø—ã—Ç–∫–∏: 4 | üíú –ñ–∏–∑–Ω–∏: 88 | ‚≠ê –û—á–∫–∏: 1
üí• –£—Ä–æ–Ω: -12 –∂–∏–∑–Ω–µ–π
```

### –®–∞–≥ 2: –ò–≥—Ä–æ–∫ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç
**–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π VK**: "–ö–∞–∫ –¥–µ–ª–∞?"
**–°–ª—É—á–∞–π–Ω—ã–π —É—Ä–æ–Ω**: 25 –∂–∏–∑–Ω–µ–π

**–ê–≤—Ç–æ–æ—Ç–≤–µ—Ç –±–æ—Ç–∞**:
```
–∫–∞–∫ –¥–µ–ª–∞ —É–¥–∞—á–Ω–æ
üéÆ –ü–æ–ø—ã—Ç–∫–∏: 3 | üíú –ñ–∏–∑–Ω–∏: 63 | ‚≠ê –û—á–∫–∏: 2
üí• –£—Ä–æ–Ω: -25 –∂–∏–∑–Ω–µ–π
```

### –®–∞–≥ 3: –ö—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
**–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π VK**: "–û–≥–æ!"
**–°–ª—É—á–∞–π–Ω—ã–π —É—Ä–æ–Ω**: 23 –∂–∏–∑–Ω–∏

**–ê–≤—Ç–æ–æ—Ç–≤–µ—Ç –±–æ—Ç–∞**:
```
–æ–≥–æ —É–¥–∞—á–Ω–æ
üéÆ –ü–æ–ø—ã—Ç–∫–∏: 1 | üíú –ñ–∏–∑–Ω–∏: 15 | ‚≠ê –û—á–∫–∏: 4
üí• –£—Ä–æ–Ω: -23 –∂–∏–∑–Ω–µ–π
‚ö†Ô∏è –û—Å—Ç–∞–ª–∞—Å—å –ø–æ—Å–ª–µ–¥–Ω—è—è –ø–æ–ø—ã—Ç–∫–∞!
üíî –ñ–∏–∑–Ω–µ–π –º–∞–ª–æ!
```

### –®–∞–≥ 4: –ü–û–ë–ï–î–ê!
**–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π VK**: "–§–∏–Ω–∏—à!"
**–°–ª—É—á–∞–π–Ω—ã–π —É—Ä–æ–Ω**: 15 –∂–∏–∑–Ω–µ–π (–¥–æ–±–∏–≤–∞–µ—Ç –æ—Å—Ç–∞—Ç–∫–∏)

**–ê–≤—Ç–æ–æ—Ç–≤–µ—Ç –±–æ—Ç–∞**:
```
—Ñ–∏–Ω–∏—à —É–¥–∞—á–Ω–æ

üéâüèÜ –í–´ –ü–û–ë–ï–î–ò–õ–ò! üèÜüéâ

–í—ã –ø—Ä–æ—à–ª–∏ –≤—Å–µ 5 –ø–æ–ø—ã—Ç–æ–∫ –∏ –ø–æ—Ç—Ä–∞—Ç–∏–ª–∏ –≤—Å–µ –∂–∏–∑–Ω–∏! –ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º —Å –ø–æ–±–µ–¥–æ–π! üéä

üìä –§–∏–Ω–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:
‚≠ê –ò—Ç–æ–≥–æ–≤—ã–µ –æ—á–∫–∏: 5
üíÄ –ü–æ—Å–ª–µ–¥–Ω–∏–π —É—Ä–æ–Ω: -15 –∂–∏–∑–Ω–µ–π
```

## –õ–æ–≥–∏–∫–∞ —Å–ª—É—á–∞–π–Ω–æ–≥–æ —É—Ä–æ–Ω–∞

- **–î–∏–∞–ø–∞–∑–æ–Ω**: 1-25 –∂–∏–∑–Ω–µ–π –∑–∞ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π
- **–°—Ä–µ–¥–Ω–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ**: ~13 –∂–∏–∑–Ω–µ–π
- **–§–æ—Ä–º—É–ª–∞**: `Math.floor(Math.random() * 25) + 1`

## –£—Å–ª–æ–≤–∏—è –ø–æ–±–µ–¥—ã

–ò–≥—Ä–æ–∫ –ø–æ–±–µ–∂–¥–∞–µ—Ç, –∫–æ–≥–¥–∞ **–æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ**:
1. ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω—ã –≤—Å–µ 5 –ø–æ–ø—ã—Ç–æ–∫ (`attempts_left <= 0`)
2. ‚úÖ –ü–æ—Ç—Ä–∞—á–µ–Ω—ã –≤—Å–µ 100+ –∂–∏–∑–Ω–µ–π (`lives_count <= 0`)

–ï—Å–ª–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ —Ç–æ–ª—å–∫–æ –æ–¥–Ω–æ —É—Å–ª–æ–≤–∏–µ - –∏–≥—Ä–∞ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è!
