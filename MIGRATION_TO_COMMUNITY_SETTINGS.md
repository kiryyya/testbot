# –ú–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–æ–æ–±—â–µ—Å—Ç–≤–∞

## üìã –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å?

### ‚ùå –£–¥–∞–ª–µ–Ω–æ:
1. **AdminPanel** (`/admin`) - –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –æ–¥–Ω–æ–≥–æ —Å–æ–æ–±—â–µ—Å—Ç–≤–∞
2. **VK_GROUP_ID** –∏–∑ `config.env` - –±–æ–ª—å—à–µ –Ω–µ –Ω—É–∂–µ–Ω
3. –†–æ—É—Ç—ã `/admin` –∏–∑ App.tsx –∏ Sidebar

### ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ:
1. **–¢–∞–±–ª–∏—Ü–∞ `community_settings`** - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–æ–æ–±—â–µ—Å—Ç–≤–∞
2. **API endpoints**:
   - `GET /api/communities/:communityId/settings`
   - `POST /api/communities/:communityId/settings`
3. **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç `CommunitySettings`** - –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –∫–∞–∂–¥–æ–≥–æ —Å–æ–æ–±—â–µ—Å—Ç–≤–∞
4. **–ê–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ group_id** –∏–∑ VK Callback API

---

## üéØ –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å–µ–π—á–∞—Å:

### 1. VK –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç callback
```json
{
  "type": "wall_reply_new",
  "group_id": 232533026,
  "object": { ... }
}
```

### 2. –°–∏—Å—Ç–µ–º–∞ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Å–æ–æ–±—â–µ—Å—Ç–≤–æ
- –ë–µ—Ä–µ—Ç `group_id` –∏–∑ –∑–∞–ø—Ä–æ—Å–∞
- –ó–∞–≥—Ä—É–∂–∞–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–∑ `community_settings`

### 3. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
```javascript
{
  community_id: 232533026,
  auto_reply_enabled: true,
  auto_reply_text: "—É–¥–∞—á–Ω–æ",
  game_enabled: true,
  default_attempts: 5,
  default_lives: 100,
  vk_access_token: null
}
```

### 4. –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –µ—Å—Ç—å –ª–∏ –∫–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ –≤ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏
- –ï—Å–ª–∏ –¥–∞ ‚Üí –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –æ—Ç–≤–µ—Ç —á–µ—Ä–µ–∑ GPT
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–æ–∫–µ–Ω –∏–∑ –Ω–∞—Å—Ç—Ä–æ–µ–∫ —Å–æ–æ–±—â–µ—Å—Ç–≤–∞ –∏–ª–∏ –≥–ª–æ–±–∞–ª—å–Ω—ã–π

---

## üìù –ö–∞–∫ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —Å–æ–æ–±—â–µ—Å—Ç–≤–æ:

1. **–ó–∞–π—Ç–∏ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É —Å–æ–æ–±—â–µ—Å—Ç–≤–∞**:
   ```
   http://localhost/communities/232533026
   ```

2. **–ü—Ä–æ–∫—Ä—É—Ç–∏—Ç—å –≤–Ω–∏–∑** –¥–æ –±–ª–æ–∫–∞ **"‚öôÔ∏è –ê–≤—Ç–æ–æ—Ç–≤–µ—Ç—ã VK"**

3. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å**:
   - ‚úÖ –í–∫–ª—é—á–∏—Ç—å/–≤—ã–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ–æ—Ç–≤–µ—Ç—ã
   - ‚úèÔ∏è –£–∫–∞–∑–∞—Ç—å –∫–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ (–Ω–∞–ø—Ä–∏–º–µ—Ä "—É–¥–∞—á–Ω–æ")
   - üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å

4. **–ì–æ—Ç–æ–≤–æ!** –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –∫ —ç—Ç–æ–º—É —Å–æ–æ–±—â–µ—Å—Ç–≤—É

---

## üîë –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç —Ç–æ–∫–µ–Ω–æ–≤:

1. `community_settings.vk_access_token` (–µ—Å–ª–∏ —É–∫–∞–∑–∞–Ω –¥–ª—è —Å–æ–æ–±—â–µ—Å—Ç–≤–∞)
2. `process.env.VK_ACCESS_TOKEN` (–≥–ª–æ–±–∞–ª—å–Ω—ã–π fallback)

---

## ‚öôÔ∏è –î–ª—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Å–æ–æ–±—â–µ—Å—Ç–≤:

–ï—Å–ª–∏ —É –≤–∞—Å **–Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–æ–æ–±—â–µ—Å—Ç–≤**:
1. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ Callback API –¥–ª—è –∫–∞–∂–¥–æ–≥–æ
2. –ó–∞–π–¥–∏—Ç–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –∫–∞–∂–¥–æ–≥–æ —Å–æ–æ–±—â–µ—Å—Ç–≤–∞
3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
4. –ö–∞–∂–¥–æ–µ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ!

---

## üöÄ –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å:

1. ‚úÖ **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å backend** - —Å–æ–∑–¥–∞—Å—Ç —Ç–∞–±–ª–∏—Ü—É `community_settings`
2. ‚úÖ **–û–±–Ω–æ–≤–∏—Ç—å frontend** - –ø—Ä–∏–º–µ–Ω–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Ä–æ—É—Ç–∏–Ω–≥–µ
3. ‚úÖ **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∫–∞–∂–¥–æ–µ —Å–æ–æ–±—â–µ—Å—Ç–≤–æ** —á–µ—Ä–µ–∑ UI

---

## üìä –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:

–¢–∞–±–ª–∏—Ü–∞ `community_settings` —Å–æ–∑–¥–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ backend:

```sql
CREATE TABLE community_settings (
  id UUID PRIMARY KEY,
  community_id BIGINT UNIQUE NOT NULL,
  auto_reply_enabled BOOLEAN DEFAULT true,
  auto_reply_text TEXT DEFAULT '—É–¥–∞—á–Ω–æ',
  game_enabled BOOLEAN DEFAULT true,
  default_attempts INTEGER DEFAULT 5,
  default_lives INTEGER DEFAULT 100,
  vk_access_token TEXT,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

–ï—Å–ª–∏ –∑–∞–ø–∏—Å–∏ –¥–ª—è —Å–æ–æ–±—â–µ—Å—Ç–≤–∞ –Ω–µ—Ç - –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–µ—Ñ–æ–ª—Ç–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏.

