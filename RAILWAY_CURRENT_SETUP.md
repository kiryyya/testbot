# üîß –¢–µ–∫—É—â–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ Railway - –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏

## ‚úÖ –ß—Ç–æ —É–∂–µ —Å–¥–µ–ª–∞–Ω–æ

1. ‚úÖ –ü—Ä–æ–µ–∫—Ç —Å–æ–∑–¥–∞–Ω –Ω–∞ Railway (ID: 9c893e2a-cf9a-4db2-8434-4ba376b03a38)
2. ‚úÖ –õ–æ–∫–∞–ª—å–Ω—ã–π –ø—Ä–æ–µ–∫—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω –∫ Railway
3. ‚úÖ –°–µ—Ä–≤–∏—Å "app" —Å–æ–∑–¥–∞–Ω
4. ‚úÖ OPENAI_API_KEY –Ω–∞—Å—Ç—Ä–æ–µ–Ω
5. ‚úÖ –ë–∞–∑–æ–≤—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–æ–±–∞–≤–ª–µ–Ω—ã

---

## üéØ –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å —Å–µ–π—á–∞—Å

### –®–ê–ì 1: –î–æ–±–∞–≤–∏—Ç—å PostgreSQL –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö

**–ß–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å Railway:**
1. –û—Ç–∫—Ä–æ–π—Ç–µ –≤–∞—à –ø—Ä–æ–µ–∫—Ç: [https://railway.com/project/9c893e2a-cf9a-4db2-8434-4ba376b03a38](https://railway.com/project/9c893e2a-cf9a-4db2-8434-4ba376b03a38)
2. –ù–∞–∂–º–∏—Ç–µ **"+ New"** (—Å–ø—Ä–∞–≤–∞ –≤–≤–µ—Ä—Ö—É)
3. –í—ã–±–µ—Ä–∏—Ç–µ **"Database"**
4. –í—ã–±–µ—Ä–∏—Ç–µ **"Add PostgreSQL"**
5. Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—Å—Ç –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –∏ –¥–æ–±–∞–≤–∏—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `DATABASE_URL`

---

### –®–ê–ì 2: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Backend —Å–µ—Ä–≤–∏—Å (app)

**–ß–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å Railway:**

1. –ö–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ —Å–µ—Ä–≤–∏—Å **"app"**
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **"Settings"** (—Å–ª–µ–≤–∞ –≤ –º–µ–Ω—é)

#### 2.1 Root Directory
- –ù–∞–π–¥–∏—Ç–µ —Å–µ–∫—Ü–∏—é **"Root Directory"**
- –í–≤–µ–¥–∏—Ç–µ: `backend`
- –ù–∞–∂–º–∏—Ç–µ **"Save"** –∏–ª–∏ –ø—Ä–æ—Å—Ç–æ –∫–ª–∏–∫–Ω–∏—Ç–µ –≤–Ω–µ –ø–æ–ª—è

#### 2.2 Start Command (–ø—Ä–æ–≤–µ—Ä—å—Ç–µ)
- –ù–∞–π–¥–∏—Ç–µ —Å–µ–∫—Ü–∏—é **"Start Command"**
- –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: `npm start`
- –ï—Å–ª–∏ –ø—É—Å—Ç–æ - –≤–≤–µ–¥–∏—Ç–µ `npm start`

#### 2.3 Generate Domain
- –ù–∞–π–¥–∏—Ç–µ —Å–µ–∫—Ü–∏—é **"Networking"**
- –í —Ä–∞–∑–¥–µ–ª–µ **"Public Networking"** –Ω–∞–∂–º–∏—Ç–µ **"Generate Domain"**
- –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø–æ–ª—É—á–µ–Ω–Ω—ã–π URL (–Ω–∞–ø—Ä–∏–º–µ—Ä: `testbot-production-xxxx.up.railway.app`)
- üìã **–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —ç—Ç–æ—Ç Backend URL!**

---

### –®–ê–ì 3: –î–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è Backend

–ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É **"Variables"** —Å–µ—Ä–≤–∏—Å–∞ **"app"** –∏ –¥–æ–±–∞–≤—å—Ç–µ/–æ–±–Ω–æ–≤–∏—Ç–µ:

```env
# VK OAuth (–Ω–æ–≤—ã–π flow)
VK_APP_ID=54125757
VK_APP_SECRET=HnHBHmxYLzSXpIgLUuxM

# Callback URL - –∑–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –≤–∞—à —Ä–µ–∞–ª—å–Ω—ã–π Backend URL!
CALLBACK_URL=https://–≤–∞—à-backend-url.up.railway.app/vk/callback

# Frontend URL - –¥–æ–±–∞–≤–∏–º –ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è Frontend
FRONTEND_URL=https://–±—É–¥–µ—Ç-–ø–æ–∑–∂–µ.up.railway.app

# VK Redirect URI - –¥–æ–±–∞–≤–∏–º –ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è Frontend
VK_REDIRECT_URI=https://–±—É–¥–µ—Ç-–ø–æ–∑–∂–µ.up.railway.app/auth/vk/callback
```

**‚ö†Ô∏è –í–ê–ñ–ù–û:**
- –ó–∞–º–µ–Ω–∏—Ç–µ `–≤–∞—à-backend-url.up.railway.app` –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π URL –∏–∑ —à–∞–≥–∞ 2.3
- `FRONTEND_URL` –∏ `VK_REDIRECT_URI` –æ–±–Ω–æ–≤–∏–º –ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è Frontend

**–£–¥–∞–ª–∏—Ç–µ —Å—Ç–∞—Ä—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ (–µ—Å–ª–∏ –Ω–µ –Ω—É–∂–Ω—ã):**
- `VK_ACCESS_TOKEN` (—Å—Ç–∞—Ä—ã–π —Å–ø–æ—Å–æ–±)
- `VK_GROUP_ID` (—Ç–µ–ø–µ—Ä—å –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
- `VK_CONFIRMATION_CODE` (—Ç–µ–ø–µ—Ä—å –≤ –ë–î)
- `VK_SECRET_KEY` (—Ç–µ–ø–µ—Ä—å –≤ –ë–î –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–æ–æ–±—â–µ—Å—Ç–≤–∞)
- `PORT` (Railway —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ $PORT)

---

### –®–ê–ì 4: –°–æ–∑–¥–∞—Ç—å Frontend —Å–µ—Ä–≤–∏—Å

1. –í —Ç–æ–º –∂–µ –ø—Ä–æ–µ–∫—Ç–µ –Ω–∞–∂–º–∏—Ç–µ **"+ New"**
2. –í—ã–±–µ—Ä–∏—Ç–µ **"GitHub Repo"**
3. –í—ã–±–µ—Ä–∏—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π **`kiryyya/testbot`**
4. Railway —Å–æ–∑–¥–∞—Å—Ç –≤—Ç–æ—Ä–æ–π —Å–µ—Ä–≤–∏—Å

#### 4.1 –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Frontend —Å–µ—Ä–≤–∏—Å–∞
–ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è —Å–µ—Ä–≤–∏—Å–∞:

1. –ö–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ –Ω–æ–≤—ã–π —Å–µ—Ä–≤–∏—Å
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **"Settings"**

**Root Directory:**
- –í–≤–µ–¥–∏—Ç–µ: `frontend`

**Build Command:**
- –í–≤–µ–¥–∏—Ç–µ: `npm install && npm run build`

**Start Command:**
- –í–≤–µ–¥–∏—Ç–µ: `npx serve -s build -l $PORT`

**Generate Domain:**
- –í **"Networking"** ‚Üí **"Generate Domain"**
- üìã **–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ Frontend URL!**

#### 4.2 –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è Frontend
–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **"Variables"** Frontend —Å–µ—Ä–≤–∏—Å–∞:

```env
REACT_APP_API_URL=https://–≤–∞—à-backend-url.up.railway.app/api
REACT_APP_VK_APP_ID=54125757
```

**‚ö†Ô∏è –ó–∞–º–µ–Ω–∏—Ç–µ** `–≤–∞—à-backend-url.up.railway.app` –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π Backend URL!

---

### –®–ê–ì 5: –û–±–Ω–æ–≤–∏—Ç—å Backend –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ

–ü–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è Frontend URL:

1. –í–µ—Ä–Ω–∏—Ç–µ—Å—å –∫ Backend —Å–µ—Ä–≤–∏—Å—É (**"app"**)
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **"Variables"**
3. –û–±–Ω–æ–≤–∏—Ç–µ:

```env
FRONTEND_URL=https://–≤–∞—à-frontend-url.up.railway.app
VK_REDIRECT_URI=https://–≤–∞—à-frontend-url.up.railway.app/auth/vk/callback
```

4. –ù–∞–∂–º–∏—Ç–µ **"Redeploy"** –¥–ª—è Backend (Deployments ‚Üí ‚ãÆ ‚Üí Redeploy)

---

### –®–ê–ì 6: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å VK –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

#### 6.1 VK Apps Manager
1. –û—Ç–∫—Ä–æ–π—Ç–µ [VK Apps Manager](https://vk.com/apps?act=manage)
2. –ù–∞–π–¥–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ ID **54125757**
3. **Settings** ‚Üí **Authorized redirect URIs**
4. –î–æ–±–∞–≤—å—Ç–µ:
   ```
   https://–≤–∞—à-frontend-url.up.railway.app/auth/vk/callback
   ```

#### 6.2 VK Callback API (–¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–æ–æ–±—â–µ—Å—Ç–≤–∞)
1. –û—Ç–∫—Ä–æ–π—Ç–µ –≤–∞—à–µ VK —Å–æ–æ–±—â–µ—Å—Ç–≤–æ
2. **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ** ‚Üí **–†–∞–±–æ—Ç–∞ —Å API** ‚Üí **Callback API**
3. –î–æ–±–∞–≤—å—Ç–µ —Å–µ—Ä–≤–µ—Ä:
   - **URL:** `https://–≤–∞—à-backend-url.up.railway.app/vk/callback`
   - **–°–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á:** (—Å–æ–∑–¥–∞–π—Ç–µ –ª—é–±–æ–π, –Ω–∞–ø—Ä–∏–º–µ—Ä: `my_secret_123`)
4. –í–∫–ª—é—á–∏—Ç–µ —Å–æ–±—ã—Ç–∏—è: –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏, –õ–∞–π–∫–∏, –°–æ–æ–±—â–µ–Ω–∏—è

---

## ‚úÖ –§–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞

### 1. Backend
```
https://–≤–∞—à-backend-url.up.railway.app
```
–î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å JSON —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ–± API

### 2. Frontend
```
https://–≤–∞—à-frontend-url.up.railway.app
```
–î–æ–ª–∂–Ω–∞ –æ—Ç–∫—Ä—ã—Ç—å—Å—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### 3. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- –í–æ–π–¥–∏—Ç–µ —á–µ—Ä–µ–∑ VK OAuth
- –î–æ–±–∞–≤—å—Ç–µ —Å–æ–æ–±—â–µ—Å—Ç–≤–æ
- –ù–∞–ø–∏—à–∏—Ç–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –≤ VK
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –±–æ—Ç –æ—Ç–≤–µ—Ç–∏–ª

---

## üìã –ë—ã—Å—Ç—Ä—ã–π checklist

- [ ] PostgreSQL –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –¥–æ–±–∞–≤–ª–µ–Ω–∞
- [ ] Backend: Root Directory = `backend`
- [ ] Backend: Domain —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω
- [ ] Backend: –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ VK_APP_ID, VK_APP_SECRET –¥–æ–±–∞–≤–ª–µ–Ω—ã
- [ ] Backend: CALLBACK_URL –æ–±–Ω–æ–≤–ª–µ–Ω —Å —Ä–µ–∞–ª—å–Ω—ã–º URL
- [ ] Frontend —Å–µ—Ä–≤–∏—Å —Å–æ–∑–¥–∞–Ω
- [ ] Frontend: Root Directory = `frontend`
- [ ] Frontend: Build/Start –∫–æ–º–∞–Ω–¥—ã –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
- [ ] Frontend: Domain —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω
- [ ] Frontend: –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ REACT_APP_API_URL, REACT_APP_VK_APP_ID –¥–æ–±–∞–≤–ª–µ–Ω—ã
- [ ] Backend: FRONTEND_URL –∏ VK_REDIRECT_URI –æ–±–Ω–æ–≤–ª–µ–Ω—ã
- [ ] Backend: Redeploy –≤—ã–ø–æ–ª–Ω–µ–Ω
- [ ] VK Apps: Redirect URI –¥–æ–±–∞–≤–ª–µ–Ω
- [ ] VK Callback API: URL –Ω–∞—Å—Ç—Ä–æ–µ–Ω

---

## üîó –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- **–í–∞—à Railway –ø—Ä–æ–µ–∫—Ç:** https://railway.com/project/9c893e2a-cf9a-4db2-8434-4ba376b03a38
- **–î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:** [RAILWAY_DEPLOY_STEPS.md](./RAILWAY_DEPLOY_STEPS.md)
- **VK Apps Manager:** https://vk.com/apps?act=manage

---

**–£–¥–∞—á–∏! üöÄ**

